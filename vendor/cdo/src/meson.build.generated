# CDO source directory - Generated file list

# C++ source files
cdo_cpp_sources = files(
  'Adisit.cc',
  'after_dvtrans.cc',
  'after_fctrans.cc',
  'after_namelist.cc',
  'after_sptrans.cc',
  'Afterburner.cc',
  'afterburnerlib.cc',
  'Arith.cc',
  'Arithc.cc',
  'Arithdays.cc',
  'Arithlat.cc',
  'bitinformation.cc',
  'Bitrounding.cc',
  'Cat.cc',
  'cdi_lockedIO.cc',
  'CDIread.cc',
  'CDItest.cc',
  'CDIwrite.cc',
  'cdo.cc',
  'cdo_cdi_wrapper.cc',
  'cdo_data.cc',
  'cdo_def_options.cc',
  'cdo_default_values.cc',
  'cdo_fctrans.cc',
  'cdo_features.cc',
  'cdo_fft.cc',
  'cdo_fftw3.cc',
  'cdo_fill.cc',
  'cdo_getopt.cc',
  'cdo_history.cc',
  'cdo_magics_mapper.cc',
  'cdo_math.cc',
  'cdo_module.cc',
  'cdo_omp.cc',
  'cdo_options.cc',
  'cdo_output.cc',
  'cdo_pthread.cc',
  'cdo_query.cc',
  'cdo_read.cc',
  'cdo_rlimit.cc',
  'cdo_season.cc',
  'cdo_settings.cc',
  'cdo_syntax_error.cc',
  'cdo_varlist.cc',
  'cdo_vlist.cc',
  'cdo_zaxis.cc',
  'cdoStream.cc',
  'cdotest.cc',
  'cellsearch_reg2d.cc',
  'Change.cc',
  'Change_e5slm.cc',
  'chunkspec.cc',
  'Cloudlayer.cc',
  'CMOR.cc',
  'CMOR_lite.cc',
  'CMOR_table.cc',
  'cmortable_parser.cc',
  'Collgrid.cc',
  'color.cc',
  'Command.cc',
  'commandline.cc',
  'Comp.cc',
  'Compc.cc',
  'Complextorect.cc',
  'Cond.cc',
  'Cond2.cc',
  'Condc.cc',
  'Consecstat.cc',
  'constants.cc',
  'convert_units.cc',
  'Copy.cc',
  'cthread_debug.cc',
  'custom_modules.cc',
  'datetime.cc',
  'Dayarith.cc',
  'dcw_reader.cc',
  'DCW_util.cc',
  'Deltat.cc',
  'Deltime.cc',
  'Depth.cc',
  'Derivepar.cc',
  'Detrend.cc',
  'Diff.cc',
  'Distgrid.cc',
  'Duplicate.cc',
  'ecacore.cc',
  'EcaEtccdi.cc',
  'EcaIndices.cc',
  'ecautil.cc',
  'Echam5ini.cc',
  'eigen_solution.cc',
  'Enlarge.cc',
  'Enlargegrid.cc',
  'Ensstat.cc',
  'Ensstat3.cc',
  'Ensval.cc',
  'eof_mode.cc',
  'Eof3d.cc',
  'Eofcoeff.cc',
  'Eofcoeff3d.cc',
  'EOFs.cc',
  'EstFreq.cc',
  'expr.cc',
  'expr_fun.cc',
  'expr_lex.cc',
  'expr_yacc.cc',
  'Exprf.cc',
  'factory.cc',
  'FC.cc',
  'field.cc',
  'field_memory.cc',
  'field_meridional.cc',
  'field_trend.cc',
  'field_vinterp.cc',
  'field_zonal.cc',
  'field2.cc',
  'field2_complex.cc',
  'fieldc.cc',
  'fieldc_complex.cc',
  'Filedes.cc',
  'fileStream.cc',
  'fill_1d.cc',
  'Fillmiss.cc',
  'Filter.cc',
  'Fldrms.cc',
  'Fldstat.cc',
  'Fldstat2.cc',
  'Fourier.cc',
  'Gengrid.cc',
  'Getgridcell.cc',
  'Gradsdes.cc',
  'grid_area.cc',
  'grid_cellsearch.cc',
  'grid_define.cc',
  'grid_from_name.cc',
  'grid_gme.cc',
  'grid_icosphere.cc',
  'grid_pointsearch.cc',
  'grid_print.cc',
  'grid_read.cc',
  'grid_read_pingo.cc',
  'Gridboxstat.cc',
  'Gridcell.cc',
  'griddes.cc',
  'griddes_h5.cc',
  'griddes_nc.cc',
  'Gridsearch.cc',
  'Harmonic.cc',
  'Healpix.cc',
  'hetaeta.cc',
  'Hi.cc',
  'Histogram.cc',
  'Importamsr.cc',
  'Importbinary.cc',
  'Importcmsaf.cc',
  'Importfv3grid.cc',
  'Importobs.cc',
  'Info.cc',
  'Input.cc',
  'institution.cc',
  'interpol.cc',
  'Intgrid.cc',
  'Intgridtraj.cc',
  'Intlevel.cc',
  'Intlevel3d.cc',
  'Intntime.cc',
  'Inttime.cc',
  'Intyear.cc',
  'Invert.cc',
  'Invertlev.cc',
  'knndata.cc',
  'Lic.cc',
  'Longinfo.cc',
  'Maggraph.cc',
  'magics_template_parser.cc',
  'Magplot.cc',
  'Magvector.cc',
  'MapReduce.cc',
  'Maskbox.cc',
  'Mastrfu.cc',
  'Math.cc',
  'memoryStream.cc',
  'Merge.cc',
  'merge_axis.cc',
  'Mergegrid.cc',
  'Mergetime.cc',
  'Merstat.cc',
  'module_info.cc',
  'modules.cc',
  'Monarith.cc',
  'mpmo.cc',
  'mpmo_color.cc',
  'Mrotuv.cc',
  'Mrotuvb.cc',
  'namelist.cc',
  'NCL_wind.cc',
  'Ninfo.cc',
  'Nmldump.cc',
  'node.cc',
  'oper_args.cc',
  'operator_help.cc',
  'Output.cc',
  'Outputgmt.cc',
  'Pack.cc',
  'par_io.cc',
  'param_conversion.cc',
  'Pardup.cc',
  'parse_literals.cc',
  'parser.cc',
  'percentiles.cc',
  'percentiles_hist.cc',
  'Pinfo.cc',
  'pipe.cc',
  'pipeStream.cc',
  'pmlist.cc',
  'pointsearch_reg2d.cc',
  'Pressure.cc',
  'printinfo.cc',
  'process.cc',
  'process_int.cc',
  'processManager.cc',
  'progress.cc',
  'pthread_debug.cc',
  'Query.cc',
  'Recttocomplex.cc',
  'region.cc',
  'Regres.cc',
  'remap_bicubic.cc',
  'remap_bilinear.cc',
  'remap_conserv.cc',
  'remap_gradients.cc',
  'remap_knn.cc',
  'remap_method_conserv.cc',
  'remap_point_search.cc',
  'remap_scrip_io.cc',
  'remap_search_reg2d.cc',
  'remap_stat.cc',
  'remap_store_link.cc',
  'remap_utils.cc',
  'remap_vars.cc',
  'Remapeta.cc',
  'Remapgrid.cc',
  'remaplib.cc',
  'Remapstat.cc',
  'Remapweights.cc',
  'Replace.cc',
  'Replacevalues.cc',
  'results_template_parser.cc',
  'Rhopot.cc',
  'Rotuv.cc',
  'Runpctl.cc',
  'Runstat.cc',
  'Samplegrid.cc',
  'Samplegridicon.cc',
  'Seascount.cc',
  'Seasmonstat.cc',
  'Seaspctl.cc',
  'Seasstat.cc',
  'Selbox.cc',
  'Select.cc',
  'Selgridcell.cc',
  'sellist.cc',
  'Selmulti.cc',
  'Seloperator.cc',
  'Selrec.cc',
  'Selregion.cc',
  'Selsurface.cc',
  'Seltime.cc',
  'Selvar.cc',
  'Selyearidx.cc',
  'Set.cc',
  'Setattribute.cc',
  'Setbox.cc',
  'Setchunkspec.cc',
  'Setfilter.cc',
  'Setgrid.cc',
  'Setgridcell.cc',
  'Sethalo.cc',
  'Setmiss.cc',
  'Setpartab.cc',
  'Setrcaname.cc',
  'Settime.cc',
  'Setzaxis.cc',
  'Shiftxy.cc',
  'Showattribute.cc',
  'Showinfo.cc',
  'Sinfo.cc',
  'Smooth.cc',
  'Sort.cc',
  'Sorttimestamp.cc',
  'Specinfo.cc',
  'specspace.cc',
  'Spectral.cc',
  'Spectrum.cc',
  'Split.cc',
  'Splitdate.cc',
  'Splitrec.cc',
  'Splitsel.cc',
  'Splittime.cc',
  'Splityear.cc',
  'statistic.cc',
  'stdnametable.cc',
  'table.cc',
  'Tee.cc',
  'template_parser.cc',
  'Test.cc',
  'Tests.cc',
  'Timcount.cc',
  'Timcumsum.cc',
  'Timfillmiss.cc',
  'Timpctl.cc',
  'Timselpctl.cc',
  'Timselstat.cc',
  'Timsort.cc',
  'Timstat.cc',
  'Timstat2.cc',
  'Timstat3.cc',
  'Tinfo.cc',
  'Tocomplex.cc',
  'Transpose.cc',
  'Trend.cc',
  'Trendarith.cc',
  'Tstepcount.cc',
  'Unpack.cc',
  'util_fileextensions.cc',
  'util_files.cc',
  'util_string.cc',
  'util_wildcards.cc',
  'Vargen.cc',
  'varray.cc',
  'Varrms.cc',
  'Varsstat.cc',
  'Verifygrid.cc',
  'Verifyweights.cc',
  'Vertcum.cc',
  'Vertfillmiss.cc',
  'vertical_interp.cc',
  'vertint_util.cc',
  'Vertintap.cc',
  'Vertintgh.cc',
  'Vertintml.cc',
  'Vertintzs.cc',
  'Vertstat.cc',
  'Vertwind.cc',
  'Wct.cc',
  'Wind.cc',
  'WindTrans.cc',
  'workerthread.cc',
  'Writegrid.cc',
  'Writerandom.cc',
  'Ydayarith.cc',
  'Ydaypctl.cc',
  'Ydaystat.cc',
  'Ydrunpctl.cc',
  'Ydrunstat.cc',
  'Yeararith.cc',
  'Yearmonstat.cc',
  'Yhourarith.cc',
  'Yhourstat.cc',
  'Ymonarith.cc',
  'Ymoncomp.cc',
  'Ymonpctl.cc',
  'Ymonstat.cc',
  'Yseaspctl.cc',
  'Yseasstat.cc',
  'zaxis_print.cc',
  'Zonstat.cc',
)

# C source files
cdo_c_sources = files(
  'gaussian_latitudes.c',
  'getMemorySize.c',
  'getRSS.c',
)

# Combine all sources
cdo_sources = cdo_cpp_sources + cdo_c_sources

# Include internal libraries
subdir('lib/ncl')
subdir('lib/healpix')
subdir('lib/gradsdes')

# Build libcdo as static library (contains shared code)
libcdo = static_library('cdo_internal',
  libcdo_la_sources,
  include_directories: [inc_dirs, cdo_inc],
  dependencies: [
    libcdi_dep,
    netcdf_dep,
    thread_dep,
    openmp_dep,
  ],
  install: false,
)

# CDO executable
cdo_exe = executable('cdo',
  'cdo.cc',
  link_with: [libcdo],
  include_directories: [inc_dirs, cdo_inc],
  dependencies: [
    libcdi_dep,
    netcdf_dep,
    thread_dep,
    openmp_dep,
    hdf5_dep,
    eccodes_dep,
    proj_dep,
    fftw3_dep,
    zlib_dep,
    libxml2_dep,
    curl_dep,
    uuid_dep,
  ],
  install: true,
  install_dir: get_option('bindir'),
  win_subsystem: 'console',
)

# Create convenience variables
cdo_inc = include_directories('.')
